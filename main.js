function a0_0x5185(){const _0x1def72=['2BITIYJ','error','urlencoded','Errore\x20API\x20cleanup-and-stop:','log','use','public','Errore\x20durante\x20il\x20salvataggio\x20dell\x27ultimo\x20minuto.','350nXyZxE','launchBrowserInKioskMode','29616rmCfCC','49AjoAzL','status','url','286644XyIoVI','get','636774oSzsec','Server\x20in\x20ascolto\x20su\x20http://localhost:','json','8264090LFDJNO','saveLastMinute','dirname','987183MsbQkf','Errore\x20API\x20save-last-minute:','message','6192088EaboMd','/save-last-minute','6052653PwgRVn','Errore\x20durante\x20l\x27arresto\x20del\x20VAR.'];a0_0x5185=function(){return _0x1def72;};return a0_0x5185();}const a0_0x10191e=a0_0x6bda;(function(_0xa79112,_0x1516c0){const _0x587e43=a0_0x6bda,_0xa374a9=_0xa79112();while(!![]){try{const _0x45b502=parseInt(_0x587e43(0x74))/0x1*(-parseInt(_0x587e43(0x84))/0x2)+-parseInt(_0x587e43(0x8a))/0x3+parseInt(_0x587e43(0x7e))/0x4*(-parseInt(_0x587e43(0x7c))/0x5)+parseInt(_0x587e43(0x82))/0x6*(-parseInt(_0x587e43(0x7f))/0x7)+parseInt(_0x587e43(0x70))/0x8+parseInt(_0x587e43(0x72))/0x9+parseInt(_0x587e43(0x87))/0xa;if(_0x45b502===_0x1516c0)break;else _0xa374a9['push'](_0xa374a9['shift']());}catch(_0x3ff209){_0xa374a9['push'](_0xa374a9['shift']());}}}(a0_0x5185,0x6ef04));import a0_0x278952 from'express';import a0_0x979e54 from'http';import{fileURLToPath}from'url';import a0_0x388143 from'path';function a0_0x6bda(_0x1e6ff2,_0x148d2c){const _0x5185af=a0_0x5185();return a0_0x6bda=function(_0x6bdac0,_0x46f77c){_0x6bdac0=_0x6bdac0-0x70;let _0x4c2409=_0x5185af[_0x6bdac0];return _0x4c2409;},a0_0x6bda(_0x1e6ff2,_0x148d2c);}import a0_0x3854ab from'body-parser';import{ffmpegModule}from'./function/ffmpegFunctionObf.js';import{kioskFunction}from'./function/kioskFunctionObf.js';const app=a0_0x278952(),port=0xbb8,__filename=fileURLToPath(import.meta[a0_0x10191e(0x81)]),__dirname=a0_0x388143[a0_0x10191e(0x89)](__filename);app['use'](a0_0x3854ab[a0_0x10191e(0x86)]()),app[a0_0x10191e(0x79)](a0_0x3854ab[a0_0x10191e(0x76)]({'extended':!![]})),app['use']('/',a0_0x278952['static'](a0_0x388143['join'](__dirname,a0_0x10191e(0x7a)))),app['get'](a0_0x10191e(0x71),async(_0x524001,_0x51513a)=>{const _0xbd4dd7=a0_0x10191e;try{const _0x54139d=await ffmpegModule[_0xbd4dd7(0x88)]();_0x51513a[_0xbd4dd7(0x80)](0xc8)['json']({'message':'Salvataggio\x20dell\x27ultimo\x20minuto\x20completato.','filePath':_0x54139d});}catch(_0x27c5af){console[_0xbd4dd7(0x75)](_0xbd4dd7(0x8b),_0x27c5af),_0x51513a[_0xbd4dd7(0x80)](0x1f4)[_0xbd4dd7(0x86)]({'message':_0xbd4dd7(0x7b),'error':_0x27c5af[_0xbd4dd7(0x8c)]});}}),app[a0_0x10191e(0x83)]('/cleanup-and-stop',async(_0x34f7e1,_0x5275d6)=>{const _0x574f53=a0_0x10191e;try{const _0x32321b=await ffmpegModule['cleanupAndStop']();_0x5275d6['status'](0xc8)['json']({'message':'Registrazione\x20interrotta\x20e\x20buffer\x20puliti.','result':_0x32321b});}catch(_0x1c9d5c){console[_0x574f53(0x75)](_0x574f53(0x77),_0x1c9d5c),_0x5275d6[_0x574f53(0x80)](0x1f4)['json']({'message':_0x574f53(0x73),'error':_0x1c9d5c[_0x574f53(0x8c)]});}});const server=app['listen'](port,async()=>{const _0x19f76d=a0_0x10191e;console[_0x19f76d(0x78)](_0x19f76d(0x85)+port),await ffmpegModule['startRecording'](),setTimeout(()=>{const _0x5d5c4d=_0x19f76d;kioskFunction[_0x5d5c4d(0x7d)](port);},0x3e8);});