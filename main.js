function a0_0x77b3(_0x36a076,_0x1075cb){const _0x330b03=a0_0x330b();return a0_0x77b3=function(_0x77b34f,_0x501c01){_0x77b34f=_0x77b34f-0x1f3;let _0x227b46=_0x330b03[_0x77b34f];return _0x227b46;},a0_0x77b3(_0x36a076,_0x1075cb);}const a0_0x4a056d=a0_0x77b3;(function(_0x501332,_0x58b7df){const _0x2cae52=a0_0x77b3,_0x17df6e=_0x501332();while(!![]){try{const _0x24646c=-parseInt(_0x2cae52(0x20e))/0x1+-parseInt(_0x2cae52(0x214))/0x2*(-parseInt(_0x2cae52(0x203))/0x3)+parseInt(_0x2cae52(0x20a))/0x4+-parseInt(_0x2cae52(0x1fc))/0x5*(parseInt(_0x2cae52(0x1f4))/0x6)+parseInt(_0x2cae52(0x1f6))/0x7*(parseInt(_0x2cae52(0x20c))/0x8)+parseInt(_0x2cae52(0x208))/0x9*(parseInt(_0x2cae52(0x206))/0xa)+-parseInt(_0x2cae52(0x201))/0xb;if(_0x24646c===_0x58b7df)break;else _0x17df6e['push'](_0x17df6e['shift']());}catch(_0x5d5406){_0x17df6e['push'](_0x17df6e['shift']());}}}(a0_0x330b,0x7f504));import a0_0x12a806 from'express';import a0_0x4bf8af from'http';function a0_0x330b(){const _0x2e8e3e=['log','message','195NFkPwQ','Errore\x20API\x20save-last-minute:','/cleanup-and-stop','join','/save-last-minute','21802143lPMigm','Salvataggio\x20dell\x27ultimo\x20minuto\x20completato.','27RZiAra','static','get','30uWFZTB','dirname','2739420OXsPcw','Errore\x20durante\x20lo\x20spegnimento:','4095096GUdCpe','startRecording','9544jEqhHy','listen','44662nDCprh','use','url','public','launchBrowserInKioskMode','json','95690uOWIHa','shutdownComputer','error','72606oiduyp','saveLastMinute','3829DtBWoR','status','cleanupAndStop','Errore\x20durante\x20il\x20salvataggio\x20dell\x27ultimo\x20minuto.'];a0_0x330b=function(){return _0x2e8e3e;};return a0_0x330b();}import{fileURLToPath}from'url';import a0_0x39ec4d from'path';import a0_0x3ef9ac from'body-parser';import{ffmpegModule}from'./function/ffmpegFunction.js';import{kioskFunction}from'./function/kioskFunction.js';const app=a0_0x12a806(),port=0xbb8,__filename=fileURLToPath(import.meta[a0_0x4a056d(0x210)]),__dirname=a0_0x39ec4d[a0_0x4a056d(0x207)](__filename);app[a0_0x4a056d(0x20f)](a0_0x3ef9ac[a0_0x4a056d(0x213)]()),app[a0_0x4a056d(0x20f)](a0_0x3ef9ac['urlencoded']({'extended':!![]})),app['use']('/',a0_0x12a806[a0_0x4a056d(0x204)](a0_0x39ec4d[a0_0x4a056d(0x1ff)](__dirname,a0_0x4a056d(0x211)))),app[a0_0x4a056d(0x205)](a0_0x4a056d(0x200),async(_0x33058b,_0x187ccc)=>{const _0x1d009d=a0_0x4a056d;try{const _0x58c6c1=await ffmpegModule[_0x1d009d(0x1f5)]();_0x187ccc[_0x1d009d(0x1f7)](0xc8)['json']({'message':_0x1d009d(0x202),'filePath':_0x58c6c1});}catch(_0x4175bc){console['error'](_0x1d009d(0x1fd),_0x4175bc),_0x187ccc[_0x1d009d(0x1f7)](0x1f4)[_0x1d009d(0x213)]({'message':_0x1d009d(0x1f9),'error':_0x4175bc['message']});}}),app[a0_0x4a056d(0x205)](a0_0x4a056d(0x1fe),async(_0x503840,_0x5d2732)=>{const _0x385836=a0_0x4a056d;try{const _0x13aba2=await ffmpegModule[_0x385836(0x1f8)]();_0x5d2732['status'](0xc8)[_0x385836(0x213)]({'message':'Registrazione\x20interrotta\x20e\x20buffer\x20puliti.\x20Spegnimento\x20in\x20corso...','result':_0x13aba2}),setTimeout(async()=>{const _0x1c0efb=_0x385836;try{console[_0x1c0efb(0x1fa)]('Avvio\x20spegnimento\x20del\x20sistema...'),await kioskFunction[_0x1c0efb(0x215)]();}catch(_0x31e08f){console[_0x1c0efb(0x1f3)](_0x1c0efb(0x209),_0x31e08f);}},0x3e8);}catch(_0x307cc9){console[_0x385836(0x1f3)]('Errore\x20API\x20cleanup-and-stop:',_0x307cc9),_0x5d2732[_0x385836(0x1f7)](0x1f4)[_0x385836(0x213)]({'message':'Errore\x20durante\x20l\x27arresto\x20del\x20VAR.','error':_0x307cc9[_0x385836(0x1fb)]});}});const server=app[a0_0x4a056d(0x20d)](port,async()=>{const _0x1373de=a0_0x4a056d;console['log']('Server\x20in\x20ascolto\x20su\x20http://localhost:'+port),await ffmpegModule[_0x1373de(0x20b)](),setTimeout(()=>{const _0x5860de=_0x1373de;kioskFunction[_0x5860de(0x212)](port);},0x3e8);});