const a0_0xf40678=a0_0x3279;function a0_0x33a8(){const _0x28747d=['dirname','json','1892097szKZXa','error','1417OVpavU','saveLastMinute','Avvio\x20spegnimento\x20del\x20sistema...','435677bTlRFI','static','cleanupAndStop','url','384918fgrujW','116670gokFnx','42EvqYdy','/save-last-minute','shutdownComputer','message','10bBmqsh','Server\x20in\x20ascolto\x20su\x20http://localhost:','urlencoded','Errore\x20durante\x20lo\x20spegnimento:','get','Registrazione\x20interrotta\x20e\x20buffer\x20puliti.\x20Spegnimento\x20in\x20corso...','launchBrowserInKioskMode','204NNUhtN','use','log','startRecording','8PVGDql','482wPDpzR','409703gTrWnz','Errore\x20durante\x20il\x20salvataggio\x20dell\x27ultimo\x20minuto.','5032jDwBPA','status'];a0_0x33a8=function(){return _0x28747d;};return a0_0x33a8();}(function(_0x5c58ae,_0x5565cf){const _0x1cd4df=a0_0x3279,_0x1418bf=_0x5c58ae();while(!![]){try{const _0x593b3e=-parseInt(_0x1cd4df(0x98))/0x1*(parseInt(_0x1cd4df(0x8f))/0x2)+parseInt(_0x1cd4df(0x9f))/0x3*(parseInt(_0x1cd4df(0x8e))/0x4)+parseInt(_0x1cd4df(0xa0))/0x5+-parseInt(_0x1cd4df(0xa1))/0x6*(parseInt(_0x1cd4df(0x90))/0x7)+parseInt(_0x1cd4df(0x92))/0x8+-parseInt(_0x1cd4df(0x96))/0x9*(-parseInt(_0x1cd4df(0xa5))/0xa)+-parseInt(_0x1cd4df(0x9b))/0xb*(-parseInt(_0x1cd4df(0x8a))/0xc);if(_0x593b3e===_0x5565cf)break;else _0x1418bf['push'](_0x1418bf['shift']());}catch(_0x141b4f){_0x1418bf['push'](_0x1418bf['shift']());}}}(a0_0x33a8,0x64cff));import a0_0x1a5462 from'express';import a0_0x1cec03 from'http';import{fileURLToPath}from'url';import a0_0x2313d5 from'path';import a0_0x2357e2 from'body-parser';import{ffmpegModule}from'./function/ffmpegFunction.js';function a0_0x3279(_0x358485,_0x34d578){const _0x33a885=a0_0x33a8();return a0_0x3279=function(_0x32794e,_0xb5d869){_0x32794e=_0x32794e-0x88;let _0x5b17ba=_0x33a885[_0x32794e];return _0x5b17ba;},a0_0x3279(_0x358485,_0x34d578);}import{kioskFunction}from'./function/kioskFunction.js';const app=a0_0x1a5462(),port=0xbb8,__filename=fileURLToPath(import.meta[a0_0xf40678(0x9e)]),__dirname=a0_0x2313d5[a0_0xf40678(0x94)](__filename);app[a0_0xf40678(0x8b)](a0_0x2357e2['json']()),app[a0_0xf40678(0x8b)](a0_0x2357e2[a0_0xf40678(0xa7)]({'extended':!![]})),app['use']('/',a0_0x1a5462[a0_0xf40678(0x9c)](a0_0x2313d5['join'](__dirname,'public'))),app['get'](a0_0xf40678(0xa2),async(_0x406a4f,_0x7337b1)=>{const _0x28a798=a0_0xf40678;try{const _0x5c6ff2=await ffmpegModule[_0x28a798(0x99)]();_0x7337b1[_0x28a798(0x93)](0xc8)[_0x28a798(0x95)]({'message':'Salvataggio\x20dell\x27ultimo\x20minuto\x20completato.','filePath':_0x5c6ff2});}catch(_0x34e1b9){console[_0x28a798(0x97)]('Errore\x20API\x20save-last-minute:',_0x34e1b9),_0x7337b1['status'](0x1f4)[_0x28a798(0x95)]({'message':_0x28a798(0x91),'error':_0x34e1b9[_0x28a798(0xa4)]});}}),app[a0_0xf40678(0xa9)]('/cleanup-and-stop',async(_0x11cd29,_0x6972ba)=>{const _0x42f1e3=a0_0xf40678;try{const _0x2289be=await ffmpegModule[_0x42f1e3(0x9d)]();_0x6972ba[_0x42f1e3(0x93)](0xc8)[_0x42f1e3(0x95)]({'message':_0x42f1e3(0x88),'result':_0x2289be}),setTimeout(async()=>{const _0x51210f=_0x42f1e3;try{console[_0x51210f(0x8c)](_0x51210f(0x9a)),await kioskFunction[_0x51210f(0xa3)]();}catch(_0x124a7f){console[_0x51210f(0x97)](_0x51210f(0xa8),_0x124a7f);}},0x3e8);}catch(_0x38c9f3){console[_0x42f1e3(0x97)]('Errore\x20API\x20cleanup-and-stop:',_0x38c9f3),_0x6972ba[_0x42f1e3(0x93)](0x1f4)[_0x42f1e3(0x95)]({'message':'Errore\x20durante\x20l\x27arresto\x20del\x20VAR.','error':_0x38c9f3['message']});}});const server=app['listen'](port,async()=>{const _0x444339=a0_0xf40678;console['log'](_0x444339(0xa6)+port),await ffmpegModule[_0x444339(0x8d)](),setTimeout(()=>{const _0x201f37=_0x444339;kioskFunction[_0x201f37(0x89)](port);},0x3e8);});