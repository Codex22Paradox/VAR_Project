const a0_0x30145c=a0_0x2e78;(function(_0x5cee20,_0x3d1f5f){const _0x131a3f=a0_0x2e78,_0x248eb2=_0x5cee20();while(!![]){try{const _0x37639d=parseInt(_0x131a3f(0xb3))/0x1*(-parseInt(_0x131a3f(0xae))/0x2)+-parseInt(_0x131a3f(0xb1))/0x3*(-parseInt(_0x131a3f(0xb5))/0x4)+parseInt(_0x131a3f(0xbd))/0x5*(parseInt(_0x131a3f(0xcb))/0x6)+parseInt(_0x131a3f(0xc4))/0x7*(-parseInt(_0x131a3f(0xbf))/0x8)+parseInt(_0x131a3f(0xab))/0x9+parseInt(_0x131a3f(0xb7))/0xa+-parseInt(_0x131a3f(0xb9))/0xb;if(_0x37639d===_0x3d1f5f)break;else _0x248eb2['push'](_0x248eb2['shift']());}catch(_0x1e735f){_0x248eb2['push'](_0x248eb2['shift']());}}}(a0_0x4bb2,0xb056f));import a0_0x28bc7e from'express';import a0_0x42464a from'http';import{fileURLToPath}from'url';import a0_0x2b938b from'path';function a0_0x2e78(_0x32ad36,_0x588f51){const _0x4bb2d3=a0_0x4bb2();return a0_0x2e78=function(_0x2e7895,_0x20af82){_0x2e7895=_0x2e7895-0xa5;let _0x294af4=_0x4bb2d3[_0x2e7895];return _0x294af4;},a0_0x2e78(_0x32ad36,_0x588f51);}import a0_0x7bbea5 from'body-parser';function a0_0x4bb2(){const _0x2ce580=['static','saveLastMinute','urlencoded','Errore\x20API\x20save-last-minute:','105HlQGqx','log','error','Errore\x20durante\x20lo\x20spegnimento:','startRecording','Errore\x20durante\x20il\x20salvataggio\x20dell\x27ultimo\x20minuto.','Errore\x20durante\x20l\x27arresto\x20del\x20VAR.','85812cvjERa','Avvio\x20spegnimento\x20del\x20sistema...','use','get','message','cleanupAndStop','/save-last-minute','7708320AfdMUU','shutdownComputer','join','2GTNJQl','/cleanup-and-stop','Salvataggio\x20dell\x27ultimo\x20minuto\x20completato.','9InVyhB','Registrazione\x20interrotta\x20e\x20buffer\x20puliti.\x20Spegnimento\x20in\x20corso...','614527mlDWMt','launchBrowserInKioskMode','1618288qdpwCt','public','2662360mciZRi','dirname','6128001tzacwb','json','status','url','345LUOrzb','Errore\x20API\x20cleanup-and-stop:','762328mIdtvK'];a0_0x4bb2=function(){return _0x2ce580;};return a0_0x4bb2();}import{ffmpegModule}from'./function/ffmpegFunction.js';import{kioskFunction}from'./function/kioskFunction.js';const app=a0_0x28bc7e(),port=0xbb8,__filename=fileURLToPath(import.meta[a0_0x30145c(0xbc)]),__dirname=a0_0x2b938b[a0_0x30145c(0xb8)](__filename);app[a0_0x30145c(0xa6)](a0_0x7bbea5[a0_0x30145c(0xba)]()),app[a0_0x30145c(0xa6)](a0_0x7bbea5[a0_0x30145c(0xc2)]({'extended':!![]})),app[a0_0x30145c(0xa6)]('/',a0_0x28bc7e[a0_0x30145c(0xc0)](a0_0x2b938b[a0_0x30145c(0xad)](__dirname,a0_0x30145c(0xb6)))),app[a0_0x30145c(0xa7)](a0_0x30145c(0xaa),async(_0x2884e6,_0x52833b)=>{const _0x576d0c=a0_0x30145c;try{const _0x30dd91=await ffmpegModule[_0x576d0c(0xc1)]();_0x52833b[_0x576d0c(0xbb)](0xc8)[_0x576d0c(0xba)]({'message':_0x576d0c(0xb0),'filePath':_0x30dd91});}catch(_0x373a8e){console[_0x576d0c(0xc6)](_0x576d0c(0xc3),_0x373a8e),_0x52833b[_0x576d0c(0xbb)](0x1f4)[_0x576d0c(0xba)]({'message':_0x576d0c(0xc9),'error':_0x373a8e['message']});}}),app[a0_0x30145c(0xa7)](a0_0x30145c(0xaf),async(_0x98f130,_0x3d524e)=>{const _0x38437d=a0_0x30145c;try{const _0x41ee5b=await ffmpegModule[_0x38437d(0xa9)]();_0x3d524e['status'](0xc8)['json']({'message':_0x38437d(0xb2),'result':_0x41ee5b}),setTimeout(async()=>{const _0x19e0cb=_0x38437d;try{console['log'](_0x19e0cb(0xa5)),await kioskFunction[_0x19e0cb(0xac)]();}catch(_0x559f20){console[_0x19e0cb(0xc6)](_0x19e0cb(0xc7),_0x559f20);}},0x3e8);}catch(_0x5c143d){console[_0x38437d(0xc6)](_0x38437d(0xbe),_0x5c143d),_0x3d524e[_0x38437d(0xbb)](0x1f4)['json']({'message':_0x38437d(0xca),'error':_0x5c143d[_0x38437d(0xa8)]});}});const server=app['listen'](port,async()=>{const _0x459c23=a0_0x30145c;console[_0x459c23(0xc5)]('Server\x20in\x20ascolto\x20su\x20http://localhost:'+port),await ffmpegModule[_0x459c23(0xc8)](),setTimeout(()=>{const _0x566956=_0x459c23;kioskFunction[_0x566956(0xb4)](port);},0x3e8);});